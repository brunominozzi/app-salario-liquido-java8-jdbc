package com.ccee.projetotestejava.main;

import java.util.Comparator;
import java.util.List;
import java.util.stream.Collectors;

import com.ccee.projetotestejava.dao.DescontosDao;
import com.ccee.projetotestejava.dao.FuncionarioDao;
import com.ccee.projetotestejava.exception.DaoException;
import com.ccee.projetotestejava.model.DescontosBean;
import com.ccee.projetotestejava.model.FuncionarioBean;

/**
 * Classe Main que contém aplicação responsável pelo processo de Calculo de 
 * salário liquido dos Funcionarios
 * 
 * @author bruno.minozzi
 * @since 27/10/2019
 *
 */
public class CalculoSalarioLiquidoFuncionarios {
	
	static FuncionarioDao funcionarioDao = null;
	
	static DescontosDao descontosDao = null;
	
	@SuppressWarnings("static-access")
	private CalculoSalarioLiquidoFuncionarios() {
		this.funcionarioDao = new FuncionarioDao();
		this.descontosDao = new DescontosDao();
	}
	
	/**
	 * Método main com run principal para execução do sistema CalculoSalarioLiquidoFuncionarios
	 * @param args
	 */
	public static void main(String[] args) {

		try {
			List<FuncionarioBean> listaFuncionarios = obterFuncionarios();
			listaFuncionarios.sort((s1, s2) -> Long.compare(s1.getValorSalarioBruto(), s2.getValorSalarioBruto()));
			List<FuncionarioBean> funcionariosOrdenados = listaFuncionarios.stream()
					.sorted(Comparator.comparing(FuncionarioBean::getValorSalarioBruto))
					.collect(Collectors.toList());
			List<DescontosBean> listaDescontos = obterDescontos();
		} catch (DaoException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
	}
	
	/**
	 * Método que encapsula busca de funcionarios
	 * @return
	 * @throws DaoException
	 */
	public static List<FuncionarioBean> obterFuncionarios() throws DaoException{
		return funcionarioDao.getListaFuncionarios();
	}
	
	/**
	 * Método que encapsula busca de descontos
	 * @return
	 * @throws DaoException
	 */
	public static List<DescontosBean> obterDescontos() throws DaoException{
		return descontosDao.getListaDescontos();
	}

}
